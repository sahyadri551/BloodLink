[debug] [2025-11-02T10:16:48.673Z] ----------------------------------------------------------------------
[debug] [2025-11-02T10:16:48.691Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\Lenovo\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only firestore:rules
[debug] [2025-11-02T10:16:48.692Z] CLI Version:   14.23.0
[debug] [2025-11-02T10:16:48.692Z] Platform:      win32
[debug] [2025-11-02T10:16:48.692Z] Node Version:  v22.20.0
[debug] [2025-11-02T10:16:48.693Z] Time:          Sun Nov 02 2025 15:46:48 GMT+0530 (India Standard Time)
[debug] [2025-11-02T10:16:48.693Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-11-02T10:16:49.058Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-11-02T10:16:49.059Z] > authorizing via signed-in user (pandit.108sah@gmail.com)
[debug] [2025-11-02T10:16:49.059Z] [iam] checking project blood-link-cc143 for permissions ["datastore.indexes.create","datastore.indexes.delete","datastore.indexes.list","datastore.indexes.update","firebase.projects.get"]
[debug] [2025-11-02T10:16:49.061Z] Checked if tokens are valid: false, expires at: 1762078798207
[debug] [2025-11-02T10:16:49.062Z] Checked if tokens are valid: false, expires at: 1762078798207
[debug] [2025-11-02T10:16:49.062Z] > refreshing access token with scopes: []
[debug] [2025-11-02T10:16:49.065Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2025-11-02T10:16:49.065Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-11-02T10:16:52.044Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2025-11-02T10:16:52.044Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-11-02T10:16:52.097Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/blood-link-cc143:testIamPermissions [none]
[debug] [2025-11-02T10:16:52.098Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/blood-link-cc143:testIamPermissions x-goog-quota-user=projects/blood-link-cc143
[debug] [2025-11-02T10:16:52.098Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/blood-link-cc143:testIamPermissions {"permissions":["datastore.indexes.create","datastore.indexes.delete","datastore.indexes.list","datastore.indexes.update","firebase.projects.get"]}
[debug] [2025-11-02T10:16:55.182Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/blood-link-cc143:testIamPermissions 200
[debug] [2025-11-02T10:16:55.182Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/blood-link-cc143:testIamPermissions {"permissions":["datastore.indexes.create","datastore.indexes.delete","datastore.indexes.list","datastore.indexes.update","firebase.projects.get"]}
[info] 
[info] === Deploying to 'blood-link-cc143'...
[info] 
[info] i  deploying firestore 
[info] i  firestore: ensuring required API firestore.googleapis.com is enabled... 
[info] i  firestore: ensuring required API firestore.googleapis.com is enabled... 
[debug] [2025-11-02T10:16:55.193Z] Checked if tokens are valid: true, expires at: 1762082211044
[debug] [2025-11-02T10:16:55.194Z] Checked if tokens are valid: true, expires at: 1762082211044
[debug] [2025-11-02T10:16:55.194Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/blood-link-cc143/databases/(default) [none]
[debug] [2025-11-02T10:16:58.172Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/blood-link-cc143/databases/(default) 200
[debug] [2025-11-02T10:16:58.173Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/blood-link-cc143/databases/(default) {"name":"projects/blood-link-cc143/databases/(default)","uid":"c69066c3-c6ce-431a-a91d-09def45d0175","createTime":"2025-10-30T17:46:47.122340Z","updateTime":"2025-10-30T17:46:47.122340Z","locationId":"asia-south2","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2025-11-02T09:17:01.432001Z","appEngineIntegrationMode":"DISABLED","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","databaseEdition":"STANDARD","freeTier":true,"realtimeUpdatesMode":"REALTIME_UPDATES_MODE_ENABLED","etag":"IJPur7Ke05ADMO3q7qbAzJAD"}
[info] i  firestore: reading indexes from firestore.indexes.json... 
[info] i  cloud.firestore: checking firestore.rules for compilation errors... 
[debug] [2025-11-02T10:16:58.227Z] Checked if tokens are valid: true, expires at: 1762082211044
[debug] [2025-11-02T10:16:58.228Z] Checked if tokens are valid: true, expires at: 1762082211044
[debug] [2025-11-02T10:16:58.228Z] >>> [apiv2][query] POST https://firebaserules.googleapis.com/v1/projects/blood-link-cc143:test [none]
[debug] [2025-11-02T10:16:58.228Z] >>> [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/blood-link-cc143:test [omitted]
[debug] [2025-11-02T10:17:01.758Z] <<< [apiv2][status] POST https://firebaserules.googleapis.com/v1/projects/blood-link-cc143:test 200
[debug] [2025-11-02T10:17:01.758Z] <<< [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/blood-link-cc143:test {}
[info] +  cloud.firestore: rules file firestore.rules compiled successfully 
[debug] [2025-11-02T10:17:01.762Z] Checked if tokens are valid: true, expires at: 1762082211044
[debug] [2025-11-02T10:17:01.762Z] Checked if tokens are valid: true, expires at: 1762082211044
[debug] [2025-11-02T10:17:01.763Z] >>> [apiv2][query] GET https://firebaserules.googleapis.com/v1/projects/blood-link-cc143/releases pageSize=10&pageToken=
[debug] [2025-11-02T10:17:02.156Z] <<< [apiv2][status] GET https://firebaserules.googleapis.com/v1/projects/blood-link-cc143/releases 200
[debug] [2025-11-02T10:17:02.156Z] <<< [apiv2][body] GET https://firebaserules.googleapis.com/v1/projects/blood-link-cc143/releases {"releases":[{"name":"projects/blood-link-cc143/releases/cloud.firestore","rulesetName":"projects/blood-link-cc143/rulesets/89172556-78ee-4412-8a11-f4583f2a15ec","createTime":"2025-10-30T17:49:04.027718Z","updateTime":"2025-11-02T09:37:47.339624Z"}]}
[debug] [2025-11-02T10:17:02.157Z] Checked if tokens are valid: true, expires at: 1762082211044
[debug] [2025-11-02T10:17:02.157Z] Checked if tokens are valid: true, expires at: 1762082211044
[debug] [2025-11-02T10:17:02.157Z] >>> [apiv2][query] GET https://firebaserules.googleapis.com/v1/projects/blood-link-cc143/rulesets/89172556-78ee-4412-8a11-f4583f2a15ec [none]
[debug] [2025-11-02T10:17:02.551Z] <<< [apiv2][status] GET https://firebaserules.googleapis.com/v1/projects/blood-link-cc143/rulesets/89172556-78ee-4412-8a11-f4583f2a15ec 200
[debug] [2025-11-02T10:17:02.551Z] <<< [apiv2][body] GET https://firebaserules.googleapis.com/v1/projects/blood-link-cc143/rulesets/89172556-78ee-4412-8a11-f4583f2a15ec [omitted]
[info] i  firestore: uploading rules firestore.rules... 
[debug] [2025-11-02T10:17:02.554Z] Checked if tokens are valid: true, expires at: 1762082211044
[debug] [2025-11-02T10:17:02.554Z] Checked if tokens are valid: true, expires at: 1762082211044
[debug] [2025-11-02T10:17:02.554Z] >>> [apiv2][query] POST https://firebaserules.googleapis.com/v1/projects/blood-link-cc143/rulesets [none]
[debug] [2025-11-02T10:17:02.554Z] >>> [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/blood-link-cc143/rulesets [omitted]
[debug] [2025-11-02T10:17:02.996Z] <<< [apiv2][status] POST https://firebaserules.googleapis.com/v1/projects/blood-link-cc143/rulesets 200
[debug] [2025-11-02T10:17:02.997Z] <<< [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/blood-link-cc143/rulesets {"name":"projects/blood-link-cc143/rulesets/dae383eb-5b1e-4129-b77b-1ba8e1fc33ad","source":{"files":[{"content":"rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    // --- RULES FOR 'users' ---\n    match /users/{userId} {\n      allow read: if true;\n      allow create: if request.auth != null && request.auth.uid == userId;\n\n      // Allow update IF:\n      // 1. You are the owner\n      // OR\n      // 2. Your UID exists as a document in the 'admins' collection\n      allow update: if request.auth != null && \n                      (request.auth.uid == userId ||\n                       exists(/databases/(database)/documents/admins/$(request.auth.uid)));\n\n      allow delete: if request.auth != null && request.auth.uid == userId;\n    }\n\n    // --- LOCK DOWN THE 'admins' COLLECTION ---\n    match /admins/{adminId} {\n      // Nobody can read or write this from the client\n      allow read, write: if false; \n    }\n\n    // --- RULES FOR 'verifiedHospitals' ---\n    match /verifiedHospitals/{hospitalId} {\n      // Allow create IF the user is an admin\n      allow create: if request.auth != null &&\n                      exists(/databases/(database)/documents/admins/$(request.auth.uid));\n\n      allow read, update, delete: if false;\n    }\n\n    // --- 'bloodRequests' ---\n    match /bloodRequests/{requestId} {\n      allow read: if true;\n      allow create: if request.auth != null;\n      allow update, delete: if request.auth != null && request.auth.uid == resource.data.uid;\n    }\n\n    // --- 'bloodCamps' ---\n    match /bloodCamps/{campId} {\n      allow read: if true;\n\n      // Check the 'verifiedHospitals' collection\n      allow create: if request.auth != null \n                    && exists(/databases/(database)/documents/verifiedHospitals/$(request.auth.uid));\n\n      allow update, delete: if request.auth != null && request.auth.uid == resource.data.hospitalId;\n    }\n\n    // --- THIS IS THE NEW FIX for 'blogPosts' ---\n    match /blogPosts/{postId} {\n      // ANYONE (logged in or out) can READ blog posts\n      allow read: if true;\n\n      // Only an ADMIN (whose UID exists in 'admins') can CREATE\n      allow create: if request.auth != null &&\n                      exists(/databases/(database)/documents/admins/$(request.auth.uid));\n\n      // Only an ADMIN can UPDATE or DELETE\n      allow update, delete: if request.auth != null &&\n                             exists(/databases/(database)/documents/admins/$(request.auth.uid));\n    }\n\n  }\n}","name":"firestore.rules"}]},"createTime":"2025-11-02T10:17:06.467423Z","metadata":{"services":["cloud.firestore"]}}
[debug] [2025-11-02T10:17:02.997Z] [rules] created ruleset projects/blood-link-cc143/rulesets/dae383eb-5b1e-4129-b77b-1ba8e1fc33ad
[debug] [2025-11-02T10:17:02.997Z] [rules] releasing cloud.firestore/(default) with ruleset projects/blood-link-cc143/rulesets/dae383eb-5b1e-4129-b77b-1ba8e1fc33ad
[debug] [2025-11-02T10:17:02.998Z] Checked if tokens are valid: true, expires at: 1762082211044
[debug] [2025-11-02T10:17:02.998Z] Checked if tokens are valid: true, expires at: 1762082211044
[debug] [2025-11-02T10:17:02.998Z] >>> [apiv2][query] PATCH https://firebaserules.googleapis.com/v1/projects/blood-link-cc143/releases/cloud.firestore/(default) [none]
[debug] [2025-11-02T10:17:02.998Z] >>> [apiv2][body] PATCH https://firebaserules.googleapis.com/v1/projects/blood-link-cc143/releases/cloud.firestore/(default) {"release":{"name":"projects/blood-link-cc143/releases/cloud.firestore/(default)","rulesetName":"projects/blood-link-cc143/rulesets/dae383eb-5b1e-4129-b77b-1ba8e1fc33ad"}}
[debug] [2025-11-02T10:17:03.400Z] <<< [apiv2][status] PATCH https://firebaserules.googleapis.com/v1/projects/blood-link-cc143/releases/cloud.firestore/(default) 200
[debug] [2025-11-02T10:17:03.400Z] <<< [apiv2][body] PATCH https://firebaserules.googleapis.com/v1/projects/blood-link-cc143/releases/cloud.firestore/(default) {"name":"projects/blood-link-cc143/releases/cloud.firestore","rulesetName":"projects/blood-link-cc143/rulesets/dae383eb-5b1e-4129-b77b-1ba8e1fc33ad","createTime":"2025-10-30T17:49:04.027718Z","updateTime":"2025-11-02T10:17:06.872531Z"}
[debug] [2025-11-02T10:17:03.401Z] [rules] updated release projects/blood-link-cc143/releases/cloud.firestore
[info] +  firestore: released rules firestore.rules to cloud.firestore 
[info] 
[info] +  Deploy complete! 
[info] 
[info] Project Console: https://console.firebase.google.com/project/blood-link-cc143/overview
[debug] [2025-11-02T10:17:08.716Z] Error: Timed out.
    at Timeout._onTimeout (C:\Users\Lenovo\AppData\Roaming\npm\node_modules\firebase-tools\lib\utils.js:275:49)
    at listOnTimeout (node:internal/timers:588:17)
    at process.processTimers (node:internal/timers:523:7)
[error] 
[error] Error: An unexpected error has occurred.
